\doxysection{importer.\+Upload\+Sales Namespace Reference}
\hypertarget{namespaceimporter_1_1_upload_sales}{}\label{namespaceimporter_1_1_upload_sales}\index{importer.UploadSales@{importer.UploadSales}}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespaceimporter_1_1_upload_sales_ad521bee3217da21b864556909a608866}{upload\+\_\+data\+\_\+mongo}} (df)
\item 
\mbox{\hyperlink{namespaceimporter_1_1_upload_sales_a4aad626dced3231dee66904c828e72d0}{find\+\_\+upc}} (upcs, df)
\item 
\mbox{\hyperlink{namespaceimporter_1_1_upload_sales_a3926ea6cbe6a64e372e611d9ea949061}{find\+\_\+irsc}} (isrc, df)
\item 
\mbox{\hyperlink{namespaceimporter_1_1_upload_sales_ae8ff370b67dbe59f8a3f9e72df7d8e53}{delete\+\_\+files\+\_\+mongo\+DB}} (files)
\item 
\mbox{\hyperlink{namespaceimporter_1_1_upload_sales_adf404a8b0ccb62b31539a80032bb012d}{delete\+\_\+duplicates}} ()
\item 
\mbox{\hyperlink{namespaceimporter_1_1_upload_sales_a76844e23af72d88d7fefd49bf1428ad7}{upload\+\_\+main}} (event, s3\+\_\+session)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespaceimporter_1_1_upload_sales_ac6363662b020bb46d3b31e2f9c6ccfc2}{collection\+\_\+name}} = os.\+environ.\+get("{}COLLECTION"{})
\begin{DoxyCompactList}\small\item\em It\textquotesingle{}s the mongo\textquotesingle{}s collection name where sales reports will be storaged. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespaceimporter_1_1_upload_sales_a3956d56a9e9085b5cdcbd6d4cc415613}{mongo\+\_\+conn}} = \mbox{\hyperlink{classimporter_1_1_mongo_connection_1_1mongo__connection}{mongo\+\_\+connection}}()
\item 
\mbox{\hyperlink{namespaceimporter_1_1_upload_sales_af1641f0cb371c0936e5db207f6a5ddf4}{collection}} = mongo\+\_\+conn.\+mongo\+\_\+conn\+\_\+sales()
\begin{DoxyCompactList}\small\item\em It\textquotesingle{}s the mongo\textquotesingle{}s collection for sales storage. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespaceimporter_1_1_upload_sales_aa1ecc69330ee384cdad22635dd1b2b8b}{catalogue\+\_\+collection}} = mongo\+\_\+conn.\+mongo\+\_\+conn\+\_\+catalogue()
\begin{DoxyCompactList}\small\item\em It\textquotesingle{}s the mongo\textquotesingle{}s collection for catalogue storage. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\Hypertarget{namespaceimporter_1_1_upload_sales_adf404a8b0ccb62b31539a80032bb012d}\label{namespaceimporter_1_1_upload_sales_adf404a8b0ccb62b31539a80032bb012d} 
\index{importer.UploadSales@{importer.UploadSales}!delete\_duplicates@{delete\_duplicates}}
\index{delete\_duplicates@{delete\_duplicates}!importer.UploadSales@{importer.UploadSales}}
\doxysubsubsection{\texorpdfstring{delete\_duplicates()}{delete\_duplicates()}}
{\footnotesize\ttfamily importer.\+Upload\+Sales.\+delete\+\_\+duplicates (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\begin{DoxyVerb} Deletes all duplicated sales lines from database (in case of they exist) caused by parallel processing

Args:
    Nothing
Returns: 
    Nothing
\end{DoxyVerb}
 \Hypertarget{namespaceimporter_1_1_upload_sales_ae8ff370b67dbe59f8a3f9e72df7d8e53}\label{namespaceimporter_1_1_upload_sales_ae8ff370b67dbe59f8a3f9e72df7d8e53} 
\index{importer.UploadSales@{importer.UploadSales}!delete\_files\_mongoDB@{delete\_files\_mongoDB}}
\index{delete\_files\_mongoDB@{delete\_files\_mongoDB}!importer.UploadSales@{importer.UploadSales}}
\doxysubsubsection{\texorpdfstring{delete\_files\_mongoDB()}{delete\_files\_mongoDB()}}
{\footnotesize\ttfamily importer.\+Upload\+Sales.\+delete\+\_\+files\+\_\+mongo\+DB (\begin{DoxyParamCaption}\item[{}]{files }\end{DoxyParamCaption})}

\begin{DoxyVerb} Deletes all files in the current batch from database (in case of they exist) to avoid overwriting

Args:
    files (list): A list which contains all filenames in the current batch splitted by formats
Returns: 
    files_delete (list): A list with filenames in the current batch
\end{DoxyVerb}
 \Hypertarget{namespaceimporter_1_1_upload_sales_a3926ea6cbe6a64e372e611d9ea949061}\label{namespaceimporter_1_1_upload_sales_a3926ea6cbe6a64e372e611d9ea949061} 
\index{importer.UploadSales@{importer.UploadSales}!find\_irsc@{find\_irsc}}
\index{find\_irsc@{find\_irsc}!importer.UploadSales@{importer.UploadSales}}
\doxysubsubsection{\texorpdfstring{find\_irsc()}{find\_irsc()}}
{\footnotesize\ttfamily importer.\+Upload\+Sales.\+find\+\_\+irsc (\begin{DoxyParamCaption}\item[{}]{isrc,  }\item[{}]{df }\end{DoxyParamCaption})}

\begin{DoxyVerb} Makes catalogue matching using isrc as key

Args:
    isrc (list): A list which contains all unique ISRCs in the current batch
    df (dataframe): Dataframe with sales matched by catalogue
Returns: Nothing
\end{DoxyVerb}
 \Hypertarget{namespaceimporter_1_1_upload_sales_a4aad626dced3231dee66904c828e72d0}\label{namespaceimporter_1_1_upload_sales_a4aad626dced3231dee66904c828e72d0} 
\index{importer.UploadSales@{importer.UploadSales}!find\_upc@{find\_upc}}
\index{find\_upc@{find\_upc}!importer.UploadSales@{importer.UploadSales}}
\doxysubsubsection{\texorpdfstring{find\_upc()}{find\_upc()}}
{\footnotesize\ttfamily importer.\+Upload\+Sales.\+find\+\_\+upc (\begin{DoxyParamCaption}\item[{}]{upcs,  }\item[{}]{df }\end{DoxyParamCaption})}

\begin{DoxyVerb} Makes catalogue matching using upc as key

Args:
    upcs (list): A list which contains all unique UPCs in the current batch
    df (dataframe): Dataframe with sales matched by catalogue
Returns: Nothing
\end{DoxyVerb}
 \Hypertarget{namespaceimporter_1_1_upload_sales_ad521bee3217da21b864556909a608866}\label{namespaceimporter_1_1_upload_sales_ad521bee3217da21b864556909a608866} 
\index{importer.UploadSales@{importer.UploadSales}!upload\_data\_mongo@{upload\_data\_mongo}}
\index{upload\_data\_mongo@{upload\_data\_mongo}!importer.UploadSales@{importer.UploadSales}}
\doxysubsubsection{\texorpdfstring{upload\_data\_mongo()}{upload\_data\_mongo()}}
{\footnotesize\ttfamily importer.\+Upload\+Sales.\+upload\+\_\+data\+\_\+mongo (\begin{DoxyParamCaption}\item[{}]{df }\end{DoxyParamCaption})}

\begin{DoxyVerb} Uploads batch lines to mongodb

Args:
    df (dataframe): Dataframe with sales matched by catalogue
Returns: Nothing
\end{DoxyVerb}
 \Hypertarget{namespaceimporter_1_1_upload_sales_a76844e23af72d88d7fefd49bf1428ad7}\label{namespaceimporter_1_1_upload_sales_a76844e23af72d88d7fefd49bf1428ad7} 
\index{importer.UploadSales@{importer.UploadSales}!upload\_main@{upload\_main}}
\index{upload\_main@{upload\_main}!importer.UploadSales@{importer.UploadSales}}
\doxysubsubsection{\texorpdfstring{upload\_main()}{upload\_main()}}
{\footnotesize\ttfamily importer.\+Upload\+Sales.\+upload\+\_\+main (\begin{DoxyParamCaption}\item[{}]{event,  }\item[{}]{s3\+\_\+session }\end{DoxyParamCaption})}

\begin{DoxyVerb} Orchestra every function and executes find_irsc function using multiprocessing 

Args:
    event (dict): Dictionary result of ProcessFiles.py
    s3_session: (boto3.session object): S3 session to connect to AWS bucket
Returns: Nothing
\end{DoxyVerb}
 

\doxysubsection{Variable Documentation}
\Hypertarget{namespaceimporter_1_1_upload_sales_aa1ecc69330ee384cdad22635dd1b2b8b}\label{namespaceimporter_1_1_upload_sales_aa1ecc69330ee384cdad22635dd1b2b8b} 
\index{importer.UploadSales@{importer.UploadSales}!catalogue\_collection@{catalogue\_collection}}
\index{catalogue\_collection@{catalogue\_collection}!importer.UploadSales@{importer.UploadSales}}
\doxysubsubsection{\texorpdfstring{catalogue\_collection}{catalogue\_collection}}
{\footnotesize\ttfamily importer.\+Upload\+Sales.\+catalogue\+\_\+collection = mongo\+\_\+conn.\+mongo\+\_\+conn\+\_\+catalogue()}



It\textquotesingle{}s the mongo\textquotesingle{}s collection for catalogue storage. 

\Hypertarget{namespaceimporter_1_1_upload_sales_af1641f0cb371c0936e5db207f6a5ddf4}\label{namespaceimporter_1_1_upload_sales_af1641f0cb371c0936e5db207f6a5ddf4} 
\index{importer.UploadSales@{importer.UploadSales}!collection@{collection}}
\index{collection@{collection}!importer.UploadSales@{importer.UploadSales}}
\doxysubsubsection{\texorpdfstring{collection}{collection}}
{\footnotesize\ttfamily importer.\+Upload\+Sales.\+collection = mongo\+\_\+conn.\+mongo\+\_\+conn\+\_\+sales()}



It\textquotesingle{}s the mongo\textquotesingle{}s collection for sales storage. 

\Hypertarget{namespaceimporter_1_1_upload_sales_ac6363662b020bb46d3b31e2f9c6ccfc2}\label{namespaceimporter_1_1_upload_sales_ac6363662b020bb46d3b31e2f9c6ccfc2} 
\index{importer.UploadSales@{importer.UploadSales}!collection\_name@{collection\_name}}
\index{collection\_name@{collection\_name}!importer.UploadSales@{importer.UploadSales}}
\doxysubsubsection{\texorpdfstring{collection\_name}{collection\_name}}
{\footnotesize\ttfamily importer.\+Upload\+Sales.\+collection\+\_\+name = os.\+environ.\+get("{}COLLECTION"{})}



It\textquotesingle{}s the mongo\textquotesingle{}s collection name where sales reports will be storaged. 

\Hypertarget{namespaceimporter_1_1_upload_sales_a3956d56a9e9085b5cdcbd6d4cc415613}\label{namespaceimporter_1_1_upload_sales_a3956d56a9e9085b5cdcbd6d4cc415613} 
\index{importer.UploadSales@{importer.UploadSales}!mongo\_conn@{mongo\_conn}}
\index{mongo\_conn@{mongo\_conn}!importer.UploadSales@{importer.UploadSales}}
\doxysubsubsection{\texorpdfstring{mongo\_conn}{mongo\_conn}}
{\footnotesize\ttfamily importer.\+Upload\+Sales.\+mongo\+\_\+conn = \mbox{\hyperlink{classimporter_1_1_mongo_connection_1_1mongo__connection}{mongo\+\_\+connection}}()}

