\doxysection{importer.\+Process\+Files Namespace Reference}
\hypertarget{namespaceimporter_1_1_process_files}{}\label{namespaceimporter_1_1_process_files}\index{importer.ProcessFiles@{importer.ProcessFiles}}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespaceimporter_1_1_process_files_a011e417c109ffc9cd804c88362505488}{save\+\_\+parquet\+\_\+s3}} (df, event, name)
\item 
\mbox{\hyperlink{namespaceimporter_1_1_process_files_a2e5c236e9f31d8d7e663e21919696006}{fix\+\_\+date}} (date)
\item 
\mbox{\hyperlink{namespaceimporter_1_1_process_files_a365a82dd6c067872b31b5745387b967a}{get\+\_\+period}} (date)
\item 
\mbox{\hyperlink{namespaceimporter_1_1_process_files_a1f2ae01869726e78c97cb8e1da4cf0ec}{create\+\_\+new\+\_\+df}} (event, formats, return\+\_\+dict)
\item 
\mbox{\hyperlink{namespaceimporter_1_1_process_files_a39df1e941c21939e1a4f7aa0a6f52250}{process\+\_\+files\+\_\+parallel}} (event, context=None)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
list \mbox{\hyperlink{namespaceimporter_1_1_process_files_a5c78926be12978ed396e2fbaebe7e05a}{merlin\+\_\+formats}}
\begin{DoxyCompactList}\small\item\em Merlin formats consider to make 1.\+5\% discount. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespaceimporter_1_1_process_files_a06c1b22247096406b0a0e0ecceec5608}{ACCESS\+\_\+\+ID}}
\begin{DoxyCompactList}\small\item\em Access keys for AWS. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespaceimporter_1_1_process_files_ac2cd6f1c48ec049e1c43e97b287f5cad}{ACCESS\+\_\+\+KEY}}
\begin{DoxyCompactList}\small\item\em Access keys for AWS. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespaceimporter_1_1_process_files_a4d2e44f3d7bfb801ba48658bc9051de9}{mongo\+\_\+conn}} = \mbox{\hyperlink{classimporter_1_1_mongo_connection_1_1mongo__connection}{mongo\+\_\+connection}}()
\begin{DoxyCompactList}\small\item\em Class to connect to mongodb. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespaceimporter_1_1_process_files_ab4b4e6bb4a9287e85dda41a981b051e9}{snap\+\_\+collection}} = mongo\+\_\+conn.\+mongo\+\_\+conn\+\_\+snapshots()
\begin{DoxyCompactList}\small\item\em Mongo collection to upload status procedure. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespaceimporter_1_1_process_files_a8bf2a18d026c378cc114e4bdc65bf643}{s3\+\_\+session}} = boto3.\+Session(aws\+\_\+access\+\_\+key\+\_\+id=\mbox{\hyperlink{namespaceimporter_1_1_process_files_a06c1b22247096406b0a0e0ecceec5608}{ACCESS\+\_\+\+ID}}, aws\+\_\+secret\+\_\+access\+\_\+key=\mbox{\hyperlink{namespaceimporter_1_1_process_files_ac2cd6f1c48ec049e1c43e97b287f5cad}{ACCESS\+\_\+\+KEY}})
\begin{DoxyCompactList}\small\item\em Connection for AWS using boto3. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\Hypertarget{namespaceimporter_1_1_process_files_a1f2ae01869726e78c97cb8e1da4cf0ec}\label{namespaceimporter_1_1_process_files_a1f2ae01869726e78c97cb8e1da4cf0ec} 
\index{importer.ProcessFiles@{importer.ProcessFiles}!create\_new\_df@{create\_new\_df}}
\index{create\_new\_df@{create\_new\_df}!importer.ProcessFiles@{importer.ProcessFiles}}
\doxysubsubsection{\texorpdfstring{create\_new\_df()}{create\_new\_df()}}
{\footnotesize\ttfamily importer.\+Process\+Files.\+create\+\_\+new\+\_\+df (\begin{DoxyParamCaption}\item[{}]{event,  }\item[{}]{formats,  }\item[{}]{return\+\_\+dict }\end{DoxyParamCaption})}

\begin{DoxyVerb}Executes full procedure per format

Args:
    event (dict): is a dictionary with all client and sales information
    formats (str): current format to process
    return_dict (dict): is a dictionary with all processed files information

Returns: return_dict (dict)
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{_process_files_8py_source_l00081}{81}} of file \mbox{\hyperlink{_process_files_8py_source}{Process\+Files.\+py}}.

Here is the call graph for this function\+:
% FIG 0
\Hypertarget{namespaceimporter_1_1_process_files_a2e5c236e9f31d8d7e663e21919696006}\label{namespaceimporter_1_1_process_files_a2e5c236e9f31d8d7e663e21919696006} 
\index{importer.ProcessFiles@{importer.ProcessFiles}!fix\_date@{fix\_date}}
\index{fix\_date@{fix\_date}!importer.ProcessFiles@{importer.ProcessFiles}}
\doxysubsubsection{\texorpdfstring{fix\_date()}{fix\_date()}}
{\footnotesize\ttfamily importer.\+Process\+Files.\+fix\+\_\+date (\begin{DoxyParamCaption}\item[{}]{date }\end{DoxyParamCaption})}

\begin{DoxyVerb}Normalize date column to YYYY-MM-DD format

Args:
    date (datetime stamp): date column
Returns: date (str)
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{_process_files_8py_source_l00056}{56}} of file \mbox{\hyperlink{_process_files_8py_source}{Process\+Files.\+py}}.

Here is the caller graph for this function\+:
% FIG 1
\Hypertarget{namespaceimporter_1_1_process_files_a365a82dd6c067872b31b5745387b967a}\label{namespaceimporter_1_1_process_files_a365a82dd6c067872b31b5745387b967a} 
\index{importer.ProcessFiles@{importer.ProcessFiles}!get\_period@{get\_period}}
\index{get\_period@{get\_period}!importer.ProcessFiles@{importer.ProcessFiles}}
\doxysubsubsection{\texorpdfstring{get\_period()}{get\_period()}}
{\footnotesize\ttfamily importer.\+Process\+Files.\+get\+\_\+period (\begin{DoxyParamCaption}\item[{}]{date }\end{DoxyParamCaption})}

\begin{DoxyVerb}Generates period given the date

Args:
    date (str): date column
Returns: period (str)
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{_process_files_8py_source_l00067}{67}} of file \mbox{\hyperlink{_process_files_8py_source}{Process\+Files.\+py}}.

Here is the caller graph for this function\+:
% FIG 2
\Hypertarget{namespaceimporter_1_1_process_files_a39df1e941c21939e1a4f7aa0a6f52250}\label{namespaceimporter_1_1_process_files_a39df1e941c21939e1a4f7aa0a6f52250} 
\index{importer.ProcessFiles@{importer.ProcessFiles}!process\_files\_parallel@{process\_files\_parallel}}
\index{process\_files\_parallel@{process\_files\_parallel}!importer.ProcessFiles@{importer.ProcessFiles}}
\doxysubsubsection{\texorpdfstring{process\_files\_parallel()}{process\_files\_parallel()}}
{\footnotesize\ttfamily importer.\+Process\+Files.\+process\+\_\+files\+\_\+parallel (\begin{DoxyParamCaption}\item[{}]{event,  }\item[{}]{context = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Executes full procedure using multiprocessing to process several formats at the same time

Args:
    event (dict): is a dictionary with all client and sales information
    context (none): it's required just for lambda execution
Returns: final_output (dict)
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{_process_files_8py_source_l00160}{160}} of file \mbox{\hyperlink{_process_files_8py_source}{Process\+Files.\+py}}.

\Hypertarget{namespaceimporter_1_1_process_files_a011e417c109ffc9cd804c88362505488}\label{namespaceimporter_1_1_process_files_a011e417c109ffc9cd804c88362505488} 
\index{importer.ProcessFiles@{importer.ProcessFiles}!save\_parquet\_s3@{save\_parquet\_s3}}
\index{save\_parquet\_s3@{save\_parquet\_s3}!importer.ProcessFiles@{importer.ProcessFiles}}
\doxysubsubsection{\texorpdfstring{save\_parquet\_s3()}{save\_parquet\_s3()}}
{\footnotesize\ttfamily importer.\+Process\+Files.\+save\+\_\+parquet\+\_\+s3 (\begin{DoxyParamCaption}\item[{}]{df,  }\item[{}]{event,  }\item[{}]{name }\end{DoxyParamCaption})}

\begin{DoxyVerb}Save current dataframe as parquet file in s3

Args:
    df (pandas dataframe): processed file loaded as dataframe
    event (dict): is a dictionary with all client and sales information
    name (str): current filename
Returns: response (str)
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{_process_files_8py_source_l00035}{35}} of file \mbox{\hyperlink{_process_files_8py_source}{Process\+Files.\+py}}.

Here is the caller graph for this function\+:
% FIG 3


\doxysubsection{Variable Documentation}
\Hypertarget{namespaceimporter_1_1_process_files_a06c1b22247096406b0a0e0ecceec5608}\label{namespaceimporter_1_1_process_files_a06c1b22247096406b0a0e0ecceec5608} 
\index{importer.ProcessFiles@{importer.ProcessFiles}!ACCESS\_ID@{ACCESS\_ID}}
\index{ACCESS\_ID@{ACCESS\_ID}!importer.ProcessFiles@{importer.ProcessFiles}}
\doxysubsubsection{\texorpdfstring{ACCESS\_ID}{ACCESS\_ID}}
{\footnotesize\ttfamily importer.\+Process\+Files.\+ACCESS\+\_\+\+ID}



Access keys for AWS. 



Definition at line \mbox{\hyperlink{_process_files_8py_source_l00025}{25}} of file \mbox{\hyperlink{_process_files_8py_source}{Process\+Files.\+py}}.

\Hypertarget{namespaceimporter_1_1_process_files_ac2cd6f1c48ec049e1c43e97b287f5cad}\label{namespaceimporter_1_1_process_files_ac2cd6f1c48ec049e1c43e97b287f5cad} 
\index{importer.ProcessFiles@{importer.ProcessFiles}!ACCESS\_KEY@{ACCESS\_KEY}}
\index{ACCESS\_KEY@{ACCESS\_KEY}!importer.ProcessFiles@{importer.ProcessFiles}}
\doxysubsubsection{\texorpdfstring{ACCESS\_KEY}{ACCESS\_KEY}}
{\footnotesize\ttfamily importer.\+Process\+Files.\+ACCESS\+\_\+\+KEY}



Access keys for AWS. 



Definition at line \mbox{\hyperlink{_process_files_8py_source_l00025}{25}} of file \mbox{\hyperlink{_process_files_8py_source}{Process\+Files.\+py}}.

\Hypertarget{namespaceimporter_1_1_process_files_a5c78926be12978ed396e2fbaebe7e05a}\label{namespaceimporter_1_1_process_files_a5c78926be12978ed396e2fbaebe7e05a} 
\index{importer.ProcessFiles@{importer.ProcessFiles}!merlin\_formats@{merlin\_formats}}
\index{merlin\_formats@{merlin\_formats}!importer.ProcessFiles@{importer.ProcessFiles}}
\doxysubsubsection{\texorpdfstring{merlin\_formats}{merlin\_formats}}
{\footnotesize\ttfamily list importer.\+Process\+Files.\+merlin\+\_\+formats}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ =\ \ [\textcolor{stringliteral}{"{}akazoo"{}},\textcolor{stringliteral}{"{}alibaba"{}},\textcolor{stringliteral}{"{}anghami"{}},\textcolor{stringliteral}{"{}AWA"{}},\ \textcolor{stringliteral}{"{}awa"{}},\ \textcolor{stringliteral}{"{}boomplay"{}},\textcolor{stringliteral}{"{}deezer"{}},\textcolor{stringliteral}{"{}iheart"{}},\textcolor{stringliteral}{"{}jiosaavn"{}},\textcolor{stringliteral}{"{}kkbox"{}},\textcolor{stringliteral}{"{}mixcloud"{}},\textcolor{stringliteral}{"{}netease"{}},\textcolor{stringliteral}{"{}pandora"{}},\textcolor{stringliteral}{"{}slacker"{}},\textcolor{stringliteral}{"{}soundcloud"{}},}
\DoxyCodeLine{00002\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}soundtrack\_your\_brand"{}},\textcolor{stringliteral}{"{}spotify"{}},\textcolor{stringliteral}{"{}tencent"{}},\textcolor{stringliteral}{"{}tiktok"{}},\textcolor{stringliteral}{"{}uma"{}},\textcolor{stringliteral}{"{}yandex"{}},\ \textcolor{stringliteral}{"{}facebook"{}},\ \textcolor{stringliteral}{"{}roxi"{}},\ \textcolor{stringliteral}{"{}triller"{}},\ \textcolor{stringliteral}{"{}resso"{}},\ \textcolor{stringliteral}{"{}peloton"{}},\textcolor{stringliteral}{"{}snapchat"{}},}
\DoxyCodeLine{00003\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}jaxsta"{}},\textcolor{stringliteral}{"{}trebel"{}},\ \textcolor{stringliteral}{"{}youtube\_merlin"{}},\ \textcolor{stringliteral}{"{}vevo"{}},\ \textcolor{stringliteral}{"{}youtube\_shorts"{}},\ \textcolor{stringliteral}{"{}youtube\_merlin\_label"{}},\ \textcolor{stringliteral}{"{}audiblemagic"{}},\ \ }
\DoxyCodeLine{00004\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}facebook\_revshare"{}},\ \textcolor{stringliteral}{"{}joox"{}},\ \textcolor{stringliteral}{"{}saavn"{}},\ \textcolor{stringliteral}{"{}tiktok-\/miniplayer"{}},\ \textcolor{stringliteral}{"{}kkbox\_v2"{}},\ \textcolor{stringliteral}{"{}soundcloud\_v2"{}},\ \textcolor{stringliteral}{"{}youtube\_tier"{}}]}

\end{DoxyCode}


Merlin formats consider to make 1.\+5\% discount. 



Definition at line \mbox{\hyperlink{_process_files_8py_source_l00019}{19}} of file \mbox{\hyperlink{_process_files_8py_source}{Process\+Files.\+py}}.

\Hypertarget{namespaceimporter_1_1_process_files_a4d2e44f3d7bfb801ba48658bc9051de9}\label{namespaceimporter_1_1_process_files_a4d2e44f3d7bfb801ba48658bc9051de9} 
\index{importer.ProcessFiles@{importer.ProcessFiles}!mongo\_conn@{mongo\_conn}}
\index{mongo\_conn@{mongo\_conn}!importer.ProcessFiles@{importer.ProcessFiles}}
\doxysubsubsection{\texorpdfstring{mongo\_conn}{mongo\_conn}}
{\footnotesize\ttfamily importer.\+Process\+Files.\+mongo\+\_\+conn = \mbox{\hyperlink{classimporter_1_1_mongo_connection_1_1mongo__connection}{mongo\+\_\+connection}}()}



Class to connect to mongodb. 



Definition at line \mbox{\hyperlink{_process_files_8py_source_l00028}{28}} of file \mbox{\hyperlink{_process_files_8py_source}{Process\+Files.\+py}}.

\Hypertarget{namespaceimporter_1_1_process_files_a8bf2a18d026c378cc114e4bdc65bf643}\label{namespaceimporter_1_1_process_files_a8bf2a18d026c378cc114e4bdc65bf643} 
\index{importer.ProcessFiles@{importer.ProcessFiles}!s3\_session@{s3\_session}}
\index{s3\_session@{s3\_session}!importer.ProcessFiles@{importer.ProcessFiles}}
\doxysubsubsection{\texorpdfstring{s3\_session}{s3\_session}}
{\footnotesize\ttfamily importer.\+Process\+Files.\+s3\+\_\+session = boto3.\+Session(aws\+\_\+access\+\_\+key\+\_\+id=\mbox{\hyperlink{namespaceimporter_1_1_process_files_a06c1b22247096406b0a0e0ecceec5608}{ACCESS\+\_\+\+ID}}, aws\+\_\+secret\+\_\+access\+\_\+key=\mbox{\hyperlink{namespaceimporter_1_1_process_files_ac2cd6f1c48ec049e1c43e97b287f5cad}{ACCESS\+\_\+\+KEY}})}



Connection for AWS using boto3. 



Definition at line \mbox{\hyperlink{_process_files_8py_source_l00033}{33}} of file \mbox{\hyperlink{_process_files_8py_source}{Process\+Files.\+py}}.

\Hypertarget{namespaceimporter_1_1_process_files_ab4b4e6bb4a9287e85dda41a981b051e9}\label{namespaceimporter_1_1_process_files_ab4b4e6bb4a9287e85dda41a981b051e9} 
\index{importer.ProcessFiles@{importer.ProcessFiles}!snap\_collection@{snap\_collection}}
\index{snap\_collection@{snap\_collection}!importer.ProcessFiles@{importer.ProcessFiles}}
\doxysubsubsection{\texorpdfstring{snap\_collection}{snap\_collection}}
{\footnotesize\ttfamily importer.\+Process\+Files.\+snap\+\_\+collection = mongo\+\_\+conn.\+mongo\+\_\+conn\+\_\+snapshots()}



Mongo collection to upload status procedure. 



Definition at line \mbox{\hyperlink{_process_files_8py_source_l00030}{30}} of file \mbox{\hyperlink{_process_files_8py_source}{Process\+Files.\+py}}.

